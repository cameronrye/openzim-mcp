name: Notification Control

# This workflow helps control when notifications are sent
# It only runs on important events and can be used to customize notification behavior

on:
  workflow_run:
    workflows: ["Release", "Performance Benchmarks", "Test"]
    types: [completed]
    branches: [main]

jobs:
  notification-summary:
    name: Smart Notification Summary
    runs-on: ubuntu-latest
    if: github.event.workflow_run.conclusion == 'failure'
    
    steps:
    - name: Send summary for failed workflows only
      uses: actions/github-script@v7
      with:
        script: |
          const workflowName = '${{ github.event.workflow_run.name }}';
          const conclusion = '${{ github.event.workflow_run.conclusion }}';
          const runUrl = '${{ github.event.workflow_run.html_url }}';
          
          // Only create an issue for repeated failures to reduce noise
          console.log(`Workflow ${workflowName} ${conclusion}`);
          console.log(`Run URL: ${runUrl}`);
          
          // You can customize this to create issues, send to Slack, etc.
          // instead of relying on email notifications
